<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>我的购物车</title>
    <link rel="stylesheet" type="text/css" href="comm.css">
</head>
<body>
<div id='app' v-cloak>
    <template v-if = "list.length">
        <table>
            <thead>
                <tr>
                    <th></th>
                    <th>商品名称</th>
                    <th>商品单价</th>
                    <th>购买数量</th>
                    <th>操作</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="(item,index) in list">
                    <td>{{index +1}}</td>
                    <td>{{item.name}}</td>
                    <td>{{item.price}}</td>
                    <td>
                        <button @click="handleRedue(index)"
                        :disabled ="item.count ===1"
                        >-</button>
                        {{item.count}}
                        <button @click="handleAdd(index)">+</button>
                    </td>
                    <td>
                        <button @click="handleRemove(index)">删除</button>
                    </td>
                    <td>
                        <div>
                            <a href="javascript:void 0">
                                <svg  class="icon icon-ok">
                                    <use xlink:href="#icon-ok"></use>
                                </svg>
                            </a>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <div>
            <input type="checkbox">全选
            <button>取消选择</button>
        </div>
        <div>总价:{{totalprice}}</总价></div>
    </template>
    <div v-else>购物车空</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script>
    new Vue({
        el:'#app',
        data:{
            list:[
                {
                    id:1,
                    name:'iphone 7',
                    price:6188,
                    count:1
                },
                {
                    id:1,
                    name:'iphone 8',
                    price:7188,
                    count:1
                },
                {
                    id:1,
                    name:'iphone 10',
                    price:8888,
                    count:1
                },
                {
                    id:1,
                    name:'iphone puls',
                    price:6555,
                    count:1
                },
            ]
        },
        methods:{
            handleRedue(index){
                if(this.list[index].count ===1) return
                this.list[index].count --
            },
            handleAdd:function(index){
                this.list[index].count ++;
            },
            handleRemove(index){
                this.list.splice(index,1)
            }

        },
        computed:{
            totalprice:function () {
                var total = 0;
                for (var  i = 0 ;i <this.list.length;i++){
                    var item = this.list[i];
                    total += item.count * item.price;
                }
                return total.toString().replace(/\B(?=(\d{3})+$)/g,',')
            }
        }
    })

</script>
</body>
</html>